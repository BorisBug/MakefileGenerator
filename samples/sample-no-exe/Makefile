#-------------------------------------------------->
# makefile autogenerated by python script
# customize it following your own needs <3
#-------------------------------------------------->

# compiler / linker
CC := gcc

# flags for compilation & linking
CFLAGS := -Wall -Werror -Wpedantic -Wextra -MMD -MP
LDFLAGS :=

# folders
SRCDIR := .
BUILDDIR := build

# folders to include on compilation time
INCS := $(addprefix -I,$(shell find $(SRCDIR) -type f -name "*.h" | xargs dirname | sort | uniq))

# source files
SRCS := lib/buffer/buffer.c lib/canbus/canbus.c lib/memset/memset.c \
	lib/unity/unity.c

# objects
OBJS := $(SRCS:%.c=$(BUILDDIR)/%.o)

# targets ########################

# build all
build: $(OBJS)

# targets for each object
$(BUILDDIR)/%.o: %.c
	@mkdir -p $(dir $@)
	@$(CC) -c $< -o $@ $(CFLAGS) $(INCS)

help:
	@clear
	@echo "******************** Targets *********************"
	@echo "help: to print this menu"
	@echo "build: to compile all sources (default)"
	@echo "clean: to remove the build folder"
	@echo "**************************************************"
	@echo ""

clean:
	@rm -rf $(BUILDDIR)

.PHONY: help build clean

-include $(OBJS:.o=.d)
